<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> 
</head>
<body>

<script>

const orgs = {
  "Kirkon Ala-aste": [
    "C64 Assembly",
    "BASIC"
  ],
  "Kurikan Yläaste, Lukio": [
    "Pascal",
    "Java",
    "JavaScript",
    "SQL"
  ],
  "Kurikan Kaupunki": [
  ],
  "Turvavartiointi M. Savela Ky": [
  ],
  "Tampere University of Technology": [
    "C++",
    "Java",
    "J",
    "Ada",
    "Fortran",
    "Matlab/Octave",
    "Lisp",
    "Prolog",
    "SPARC Assembly",
    "ESSI",
    "JavaScript",
    "R",
    "Perl",
    "SQL",
    "LaTeX",
    "DOT"
  ],
  "Roboteam": [
  ],
  "Finnpos Systems Oy": [
  ],
  "Elektrobit Oyj": [
  ],
  "Nice-business Solutions Oy": [
  ],
  "Neter": [
  ],
  "Cybercom Finland Oy": [
  ]
};

const projects = {
  "Kurikan Ryhti homepages and TV ads": {
    "org": "Kurikan Kaupunki",
    "langs": [
      "JavaScript",
      "HTML/CSS"
  ]},
  "Programming courses for 10-14 year-olds": {
    "org": "Kurikan Kaupunki",
    "langs": [
      "Java",
      "HTML/CSS"
  ]},
  "Eurobot": {
    "org": "Roboteam",
    "langs": [
    "C++",
    "Matlab/Octave",
    "LaTeX"
  ]},
  "Robotic Bartender": {
    "org": "Roboteam",
    "langs": [
    "Rapid",
    "C++",
    "Matlab/Octave"
  ]},
  "Finnpos F2": {
    "org": "Finnpos Systems Oy",
    "langs": [
    "Dynamic C",
    "Perl",
    "HTML/CSS"
  ]},
  "Finnpos F3": {
    "org": "Finnpos Systems Oy",
    "langs": [
    "Java"
  ]},
  "Linux driver, LG touchscreen": {
    "org": "Finnpos Systems Oy",
    "langs": [
    "C"
  ]},
  "VoIP System": {
    "org": "Finnpos Systems Oy",
    "langs": [
    "C++",
    "Java"
  ]},
  "Crypto infrastructure": {
    "org": "Finnpos Systems Oy",
    "langs": [
    "Java",
    "SQL",
    "LaTeX"
  ]},
  "Datamike billing/accounting": {
    "org": "Turvavartiointi M. Savela Ky",
    "langs": [
    "xBase"
  ]},
  "Rene RNC HSPA": {
    "org": "Elektrobit Oyj",
    "langs": [
    "C",
    "Python",
    "Perl",
    "LaTeX",
    "DOT"
  ]},
  "Carbook": {
    "org": "Elektrobit Oyj",
    "langs": [
    "Java",
    "Python",
    "Perl",
    "Erlang",
    "RDF",
    "JavaScript",
    "SQL",
    "LaTeX"
  ]},
  "Identity Federation": {
    "org": "Nice-business Solutions Oy",
    "langs": [
    "Perl",
    "Java",
    "Python",
    "HTML/CSS",
    "Ruby",
    "JavaScript"
  ]},
  "B2B Portal": {
    "org": "Nice-business Solutions Oy",
    "langs": [
    "Java",
    "Scala",
    "HTML/CSS",
    "JavaScript",
    "SQL"
  ]},
  "BPT": {
    "org": "Nice-business Solutions Oy",
    "langs": [
    "Java",
    "HTML/CSS",
    "JavaScript",
    "SQL"
  ]},
  "Drupal CMS": {
    "org": "Nice-business Solutions Oy",
    "langs": [
      "HTML/CSS",
      "JavaScript",
      "PHP"
  ]},
  "Drupal concept app": {
    "org": "Cybercom Finland Oy",
    "langs": [
      "HTML/CSS",
      "JavaScript",
      "PHP"
  ]},
  "EURA funds management": {
    "org": "Cybercom Finland Oy",
    "langs": [
    "Java",
    "Scala",
    "Groovy",
    "HTML/CSS",
    "JavaScript",
    "SQL"
  ]},
  "Industrial calibration": {
    "org": "Cybercom Finland Oy",
    "langs": [
    "JavaScript",
    "TypeScript",
    "C",
    "Matlab/Octave"
  ]},
  "Machinebook": {
    "org": "Cybercom Finland Oy",
    "langs": [
    "JavaScript",
    "LaTeX"
  ]},
  "Innovation Zone": {
    "org": "Cybercom Finland Oy",
    "langs": [
    "Java",
    "JavaScript",
    "Matlab/Octave",
    "UnityScript",
    "R",
    "SQL"
  ]},
  "Oskari": {
    "org": "Cybercom Finland Oy",
    "langs": [
    "Java",
    "JavaScript",
    "SQL"
  ]},
  "Suomi.fi": {
    "org": "Cybercom Finland Oy",
    "langs": [
    "Java",
    "JavaScript",
    "RDF",
    "SQL"
  ]},
  "Presentations": {
    "org": "Cybercom Finland Oy",
    "langs": [
    "LaTeX",
    "DOT",
    "JavaScript",
    "Solidity",
    "Python"
  ]},
  "Hacking competitions": {
    "org": "Cybercom Finland Oy",
    "langs": [
    "Python",
    "JavaScript",
    "HTML/CSS",
    "DOT"
  ]},
  "Advisory":  {
    "org": "Cybercom Finland Oy",
    "langs": []
  },
  "NFC Cordova app": {
    "org": "Neter",
    "langs": [
    "Java",
    "JavaScript"
  ]},
  "A therapeutic phaser game": {
    "org": "Neter",
    "langs": [
    "JavaScript"
  ]},
  "Research": {
    "org": "Neter",
    "langs": [
    "Python",
    "Lua",
    "Solidity",
    "LaTeX"
  ]}
};

const epochs = {
  "1989–1994": ["Kirkon Ala-aste"],
  "1995–2000": ["Kurikan Yläaste, Lukio", "Kurikan Kaupunki", "Turvavartiointi M. Savela Ky"],
  "2001–2008": ["Roboteam", "Finnpos Systems Oy", "Tampere University of Technology", "Elektrobit Oyj"],
  "2009–2012": ["Elektrobit Oyj", "Nice-business Solutions Oy", "Neter"],
  "2012–": ["Neter", "Cybercom Finland Oy"]
};

const timeline = ["1989–1994", "1995–2000", "2001–2008", "2009–2012", "2012–"];

const skills = [
  "3D modeling",
  "Tracker music",
  "Value Creation Canvas",
  "Full-stack",
  "Architecture",
  "Machine learning",
  "Artificial intelligence",
  "Deep learning",
  "Signal processing",
  "Mathematical modeling",
  "Cryptoalgorithms",
  "Blockchain"
];

const tools = [
  "Docker",
  "Ansible",
  "Git",
  "Subversion",
  "Mercurial",
  "CVS",
  "Confluence",
  "Jira",
  "Qt",
  "React",
  "Polymer",
  "OSEck"
];

$(function() {
  console.log(JSON.stringify(orgs));
  const langNodes = [... new Set(
    Object.keys(orgs).map(k => orgs[k]).reduce((x, y) => x.concat(y), []).concat(
        Object.keys(projects).map(k => projects[k].langs).reduce((x, y) => x.concat(y), [])
    )
  )];
  const orgNodes = Object.keys(orgs);
  const epochNodes = Object.keys(epochs);
  const projectNodes = Object.keys(projects);
  
  const nodes =
    langNodes.map(l => ({id: l, label: l, group: 1})).concat(
    orgNodes.map(o => ({id: o, label: o, group: 2}))).concat(
    epochNodes.map(e => ({id: e, label: e, group: 3}))).concat(
    projectNodes.map(e => ({id: e, label: e, group: 4})));
  
  const pairwiseTimeline = [];
  for (let i = 1; i < timeline.length; i++) {
    pairwiseTimeline.push([timeline[i-1], timeline[i]]);
  }
  
  const edges = Object.keys(orgs)
    .map(o => orgs[o].map(l => [l, o]))
    .reduce((x, y) => x.concat(y), [])
    .concat(
      Object.keys(epochs)
      .map(e => epochs[e].map(o => [e, o]))
      .reduce((x, y) => x.concat(y), []))
    .concat(
      pairwiseTimeline
    )
    .concat(
      Object.keys(projects).map(p => projects[p].langs.map(l => [l, p]))
      .reduce((x, y) => x.concat(y), [])
    )
    .concat(
      Object.keys(projects).map(p => [projects[p].org, p])
    );
  
  const visNodes = new vis.DataSet(nodes);
  const visEdges = new vis.DataSet(edges.map(e => ({from: e[0], to: e[1]})));
  // create a network
  const container = document.getElementById('vis');
  const data = {
    nodes: visNodes,
    edges: visEdges
  };
  const options = {};
  const network = new vis.Network(container, data, options);
  network.once('stabilized', function() {
    var scaleOption = { scale : 1.4 };
    network.moveTo(scaleOption);
  });
});

</script>
<h1>Timeline, Organizations, Projects, Programming languages</h1>
<div id="vis"></div>
</body>
</html>
